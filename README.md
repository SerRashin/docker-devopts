# DevOps by S.Rashin

Данное окружение позволяет поднять любое окружение в рамках монолитной архитектуры приложения.
Все хосты обслуживаются только одним екземпляром контейнеров, т.е. все хосты будут обслуживаться только одним инстансом nginx, php и т.д.

## Установка / Install
Для установки запустите
```shell
./install.sh
```
Установщик поставит вам все необходимое, docker, docker-compose, а так же переместит все файлы в вашу директорию /var/www/.
Если вы держите проект, вне /var/www/ закоментируйте или измените путь на нужный.

## Настройка / Setup
Для настройки всех контейнеров, откройте файл docker-compose.yml
Вы можете отключить не нужные вам модули, скажем убрать postgres и phppgadmin.
Для этого просто закоментируйте не нужные контейнеры, и найдите все links: которые могут использовать данный контейнер и так же закоментируйте.

### Настройка Nginx
Для настройки nginx зайдите в директорию /docker/config/nginx/ и добавьте нужный файл.
В директории conf.d находятся хосты nginx.

### Настройка PHP 
Настройки PHP находятся по адресу /docker/config/php/{ваша версия}/php.ini
{ваша версия} - чтобы узнать вашу версию php откройте файл docker-compose.yml, найдите строку php-fpm: и посмотрите секцию build:

### Остальные модули
Другие модули типа mysql, postgres и т.д. настраиваются аналогичным образом.
Если в контейнер необходимо пробросить конфигурацию укажите volume: к нужному модулю.

## Расширенная настройка
Для более расширенной настройки, вы должны быть знакомы с dockerfile.
Если вам нужно к примеру поставить в PHP 7 fpm дополнительный модуль, зайдите в папку docker/container/php/7.1/
Откройте Dockerfile, и добавьте установку нужного вам модуля.
То же самое касается и остальных модулей.

## Запуск
Для запуска достаточно набрать в консоли 
``` shell
docker-compose up [-d] [--build]
```
* docker-compose up : поднимет все контейнеры, и сделает между ними линки.
* -d : не обязательный флаг, означает что контейнеры должны быть подняты как daemon.
* --build : данный флаг указывает на то что необходимо пересобрать все контейнеры, например если вы добавили что-то в dockerfile.

